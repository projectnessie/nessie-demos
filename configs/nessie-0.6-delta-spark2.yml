#
# Copyright (C) 2020 Dremio
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
#
# Nessie-Demo config-yaml to run demos against Nessie 0.6 for Delta w/ Spark 2
#
# NOTE: Requires Python 3.7 - newer Python version don't work with pyspark 2.4 !

versions:
  nessie: 0.6.1

python_dependencies:
  - setuptools>=56.2.0  # required to successfully install pyspark in older envs due to pandoc install issues
  - pynessie==0.6.0
  - findspark==1.4.2
  - pyspark==2.4.2

# Notes for Ubuntu 21.04 users:
#
# 1. Download a 3.7 source tarball from https://www.python.org/ftp/python/
#   1. Unpack it
#   2. `./configure`
#   3. `make`
#   4. `sudo make altinstall`  (don't mess with the system Python)
# 2. Setup a venv:
#   1. `virtualenv -p $(which python3.7) --pip 21.1.1 venv3.7`
#   2. `. venv3.7/bin/activate`
#   3. `pip install pytest`
#   4. `pip install -r pydemolib/requirements.txt`
# 3. Run pytest:
#   `venv3.7/bin/pytest -ra --capture=tee-sys tests/test_with_delta.py::TestWithDelta::test_with_delta_spark2`
